{"version":3,"sources":["webpack:///webpack/bootstrap 68f5afe4b5866298ec18","webpack:///external \"mongoose\"","webpack:///./~/babel-runtime/regenerator/index.js","webpack:///./server/config/index.js","webpack:///external \"axios\"","webpack:///external \"koa-router\"","webpack:///external \"fs\"","webpack:///external \"jsonwebtoken\"","webpack:///external \"md5\"","webpack:///external \"path\"","webpack:///./nuxt.config.js","webpack:///./server/routes/index.js","webpack:///external \"@koa/cors\"","webpack:///external \"koa\"","webpack:///external \"koa-bodyparser\"","webpack:///external \"koa-static\"","webpack:///external \"nuxt\"","webpack:///./server/controllers/article.js","webpack:///./server/controllers/comment.js","webpack:///./server/controllers/tag.js","webpack:///./server/controllers/tool.js","webpack:///./server/controllers/user.js","webpack:///./server/middlewares/check-token.js","webpack:///./server/models/article.js","webpack:///./server/models/comment.js","webpack:///./server/models/index.js","webpack:///./server/models/tag.js","webpack:///./server/models/user.js","webpack:///external \"formidable\"","webpack:///external \"markdown-it\"","webpack:///external \"nodemailer\"","webpack:///external \"os\"","webpack:///external \"regenerator-runtime\"","webpack:///external \"url\"","webpack:///./server/index.js"],"names":["user","role","username","password","email","nickname","motto","avatar","jwt","secret","mongodb","host","database","port","githubConfig","githubClient","githubSecret","scope","emailConfig","pass","app","domain","routerBaseApi","module","exports","head","meta","charset","name","content","hid","link","rel","type","href","title","css","loading","color","build","vendor","extend","config","ctx","isClient","rules","push","enforce","test","loader","exclude","manifest","description","theme_color","modules","plugins","router","require","tag","article","comment","tool","get","rss","sitemap","robots","post","sendEmail","githubCallback","githubLogin","getUserInfo","patch","patchUserInfo","login","logout","getTagsOrArticles","postTag","patchTag","del","deleteTag","search","getArticle","getArticles","getPrivateArticles","archives","postArticle","upload","patchArticle","deleteArticle","postComment","getComments","deleteComment","Article","mongoose","model","next","params","page","limit","Number","find","publish","exec","total","length","populate","path","select","skip","sort","data","body","success","err","id","findOne","_id","findByIdAndUpdate","views","request","String","save","updatedAt","Date","now","findByIdAndRemove","keyword","decodeURIComponent","reg","RegExp","$or","$regex","articles","arr","arr2","year","month","date","i","createdAt","getFullYear","getMonth","archiveArticles","j","getImgUrl","Promise","resolve","reject","form","parse","req","fields","files","console","log","lastItem","Object","keys","extname","oldUrl","newUrl","readStream","fs","createReadStream","writeStream","createWriteStream","pipe","imgUrl","formidable","IncomingForm","then","url","Comment","User","token","replyId","axios","$push","comments","safe","upsert","e","Tag","tags","nodemailer","tail","res","reduce","prev","curr","trim","end","toUTCString","md","render","replace","fromUserNickname","fromUserContent","fromUserEmail","toUserNickname","toUserContent","toUserEmail","articleId","transporter","createTransport","service","secure","auth","mailOptions","from","to","subject","html","sendMail","info","catch","md5","expiresIn","sign","userID","cookies","set","avatarUrl","oldPassword","newPassword","findOneAndUpdate","state","u","statusCode","setHeader","query","code","githubToken","ret","split","obj","forEach","item","key","value","access_token","userInfo","bio","avatar_url","response","redirect","parseCookies","cookie","cookieObj","cookieArr","checkToken","decoded","verify","checkGithubToken","Schema","ArticleSchema","Boolean","default","flag","like","Array","Types","ObjectId","ref","options","toJSON","virtuals","versionKey","transform","doc","CommentSchema","mongoUrl","global","connection","openUri","once","on","error","warn","TagSchema","UserSchema","process","env","HOST","globalConfig","PORT","use","cors","bodyParser","KoaStatic","route","routes","allowedMethods","dev","nuxt","builder","status","promise","listen","start"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 33);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 68f5afe4b5866298ec18","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/regenerator/index.js\n// module id = 1\n// module chunks = 0","export default {\n  user: {\n    role: 'superAdmin',\n    username: 'q',\n    password: 'q',\n    email: 'qq22337383@gmail.com',\n    nickname: 'VueBlog',\n    motto: 'Never too old to learn',\n    avatar: 'avatar.png'\n  },\n  jwt: {\n    secret: 'vueblog'\n  },\n  mongodb: {\n    host: '127.0.0.1',\n    database: 'vueblog',\n    port: 27017,\n    username: '',\n    password: ''\n  },\n  githubConfig: {\n    githubClient: '',\n    githubSecret: '',\n    scope: 'user'\n  },\n  emailConfig: {\n    user: '',\n    pass: ''\n  },\n  app: {\n    domain: '',\n    host: '45.77.31.139',\n    port: 3000,\n    routerBaseApi: 'api'\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/config/index.js","module.exports = require(\"axios\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"axios\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"koa-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-router\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"md5\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"md5\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 8\n// module chunks = 0","module.exports = {\n  head: {\n    meta: [\n      { charset: 'utf-8' },\n      { name: 'viewport', content: 'width=device-width, initial-scale=1' },\n      { name: 'renderer', content: 'webkit' },\n      { hid: 'keywords', name: 'keywords', content: 'VueBlog, Vuejs, Nodejs, 服务端渲染'},\n      { hid: 'description', name: 'description', content: 'VueBlog是一个基于Vuejs开发的小型博客应用，让你可以为所欲为的分享自己的知识和创作'}\n    ],\n    link: [\n      { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' },\n      { rel: 'alternate', type: 'application/rss+xml', title: 'RSS 2.0', href: '/rss.xml' },\n      { rel: 'stylesheet', type: 'text/css', href: '//at.alicdn.com/t/font_620064_hrymm1e94nnlv7vi.css' }\n    ]\n  },\n  css: ['~assets/css/main.scss', 'highlight.js/styles/github.css'],\n  loading: { color: '#42B983' },\n  build: {\n    vendor: ['axios'],\n    extend(config, ctx) {\n      if (ctx.isClient) {\n        config.module.rules.push({\n          enforce: 'pre',\n          test: /\\.(js|vue)$/,\n          loader: 'eslint-loader',\n          exclude: /(node_modules)/\n        })\n      }\n    }\n  },\n  manifest: {\n    name: 'VueBlog',\n    description: 'A blog system',\n    theme_color: '#42B983'\n  },\n  modules: ['@nuxtjs/pwa', '@nuxtjs/axios'],\n  plugins: ['~/plugins/components.js', '~/plugins/filters.js']\n}\n\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js","import axios from 'axios'\nimport Router from 'koa-router'\nimport config from '../config'\nimport db from '../models'\nimport {checkToken, checkGithubToken} from '../middlewares/check-token'\n\nconst router = new Router()\nconst user = require('../controllers/user')\nconst tag = require('../controllers/tag')\nconst article = require('../controllers/article')\nconst comment = require('../controllers/comment')\nconst tool = require('../controllers/tool')\n\nrouter\n  .get('/rss.xml', tool.rss)\n  .get('/sitemap.xml', tool.sitemap)\n  .get('/robots.txt', tool.robots)\n  .post('/api/send-email', tool.sendEmail)\n\nrouter\n  .get(/\\/api\\/oauth\\/github\\/callback/, user.githubCallback)\n  .get('/api/oauth/github/:state?', user.githubLogin)\n\nrouter\n  .get('/api/user/:username?', user.getUserInfo)\n  .patch('/api/user', checkToken, user.patchUserInfo)\n  .post('/api/login', user.login)\n  .post('/api/logout', checkToken, user.logout)\n\nrouter\n  .get('/api/tags/:id?', tag.getTagsOrArticles)\n  .post('/api/tag', checkToken, tag.postTag)\n  .patch('/api/tag', checkToken, tag.patchTag)\n  .del('/api/tag/:id?', checkToken, tag.deleteTag)\n\nrouter\n  .get('/api/search/:keyword?', article.search)\n  .get('/api/article/:id?', article.getArticle)\n  .get('/api/articles/:page?/:limit?', article.getArticles)\n  .get('/api/private-articles', checkToken, article.getPrivateArticles)\n  .get('/api/archives', article.archives)\n  .post('/api/article', checkToken, article.postArticle)\n  .post('/api/upload', checkToken, article.upload)\n  .patch('/api/article', checkToken, article.patchArticle)\n  .del('/api/article/:id?', checkToken, article.deleteArticle)\n\nrouter\n  .post('/api/comment', comment.postComment)\n  .get('/api/comments', comment.getComments)\n  .del('/api/comment/:id?', checkToken, comment.deleteComment) // 管理员可以删除评论\n\nexport default router\n\n\n\n// WEBPACK FOOTER //\n// ./server/routes/index.js","module.exports = require(\"@koa/cors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@koa/cors\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"koa-bodyparser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-bodyparser\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"koa-static\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-static\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 15\n// module chunks = 0","import mongoose from 'mongoose'\nimport path from 'path'\nimport os from 'os'\nimport fs from 'fs'\nimport formidable from 'formidable'\nimport config from '../config'\nconst Article = mongoose.model('Article')\n\nconst domain = config.app.domain ? config.app.domain : `http://${config.app.host}:${config.app.port}`\n\nexport const getArticles = async(ctx, next) => {\n  let { page = 1, limit = 15 } = ctx.params\n  page = Number((page - 1) * limit) || 0\n  limit = Number(limit) || 15\n\n  try {\n    let total = await Article.find({ publish: true }).exec()\n    total = total.length\n    const data = await Article.find({ publish: true })\n      .populate({\n        path: 'tags',\n        select: 'id name'\n      })\n      .skip(page)\n      .limit(limit)\n      .sort({ 'createdAt': -1 })\n      .exec()\n    ctx.body = {\n      success: true,\n      data: data,\n      total: total\n    }\n  } catch (e) {\n    ctx.body = {\n      success: false,\n      err: e,\n      total: 0\n    }\n  }\n}\n\nexport const getPrivateArticles = async(ctx, next) => {\n  const data = await Article.find({ publish: false })\n    .populate({\n      path: 'tags',\n      select: 'id name'\n    })\n    .sort({ 'updatedAt': -1 })\n    .exec()\n  ctx.body = {\n    success: true,\n    data: data\n  }\n}\n\nexport const getArticle = async(ctx, next) => {\n  let { id } = ctx.params\n  if (!id) {\n    return (ctx.body = {\n      success: false,\n      err: 'id is required'\n    })\n  }\n\n  try {\n    let article = await Article.findOne({ _id: id })\n      .populate({\n        path: 'tags',\n        select: 'id name'\n      })\n      .populate({\n        path: 'comments',\n        populate: { path: 'user'}\n        // options: {sort:{createdAt: -1}}\n      })\n      .exec()\n    await Article.findByIdAndUpdate(id, { views: article.views + 1 }).exec()\n    ctx.body = {\n      success: true,\n      data: article\n    }\n  } catch (e) {\n    // console.log(e)\n    ctx.body = {\n      success: false,\n      err: e\n    }\n  }\n}\n\nexport const postArticle = async(ctx, next) => {\n  let body = ctx.request.body\n  let { title, content, publish } = body\n  if (!title || !content || !String(publish)) {\n    return (ctx.body = {\n      success: false,\n      err: 'Field incomplete'\n    })\n  }\n\n  try {\n    body = await new Article(body)\n    await body.save()\n    ctx.body = {\n      success: true,\n      data: body\n    }\n  } catch (e) {\n    ctx.body = {\n      success: false,\n      err: e\n    }\n  }\n}\n\n\n// 修改私有文章或已发布文章\nexport const patchArticle = async(ctx, next) => {\n  let body = ctx.request.body\n  body.updatedAt = Date.now()\n  let { id, title, content, publish } = body\n  if (!id || !title || !content || !String(publish)) {\n    return (ctx.body = {\n      success: false,\n      err: 'Field incomplete'\n    })\n  }\n\n  try {\n    body = await Article.findByIdAndUpdate(id, body).exec()\n    ctx.body = {\n      success: true,\n      data: body\n    }\n  } catch (e) {\n    ctx.body = {\n      success: false,\n      err: e\n    }\n  }\n}\n\nexport const deleteArticle = async(ctx, next) => {\n  let { id } = ctx.params\n\n  if (!id) {\n    return (ctx.body = {\n      success: false,\n      err: 'id is required'\n    })\n  }\n\n  try {\n    let body = await Article.findByIdAndRemove(id).exec()\n    ctx.body = {\n      success: true,\n      data: body\n    }\n  } catch (e) {\n    ctx.body = {\n      success: false,\n      err: e\n    }\n  }\n}\n\nexport const search = async(ctx, next) => {\n  let { keyword } = ctx.params\n  keyword = decodeURIComponent(keyword)\n  let reg = new RegExp(keyword, 'i')\n  try {\n    let body = await Article.find({\n        publish: true,\n        $or: [{ title: { $regex: reg } }, { content: { $regex: reg } }]\n      })\n      .sort({ 'createdAt': -1 })\n      .exec()\n    ctx.body = {\n      success: true,\n      data: body\n    }\n  } catch (e) {\n    ctx.body = {\n      success: false,\n      err: e\n    }\n  }\n}\n\nexport const archives = async(ctx, next) => {\n  let articles = await Article.find({ publish: true })\n    .populate({\n      path: 'tags',\n      select: 'id name'\n    })\n    .select('id title tags createdAt updatedAt')\n    .sort({ 'createdAt': -1 })\n    .exec()\n  let arr = [],\n    arr2 = [],\n    year, month, date\n  for (let i = 0; i < articles.length; i++) {\n    year = new Date(articles[i].createdAt).getFullYear() + ''\n    month = new Date(articles[i].createdAt).getMonth() + 1 + ''\n    if (month.length === 1) {\n      month = '0' + month\n    }\n    date = `${year}年${month}月`\n    arr.push({\n      date: date,\n      article: articles[i]\n    })\n  }\n\n  for (let i = 0; i < arr.length;) {\n    let total = 0,\n      archiveArticles = []\n    for (let j = i; j < arr.length; j++) {\n      if (arr[i].date === arr[j].date) {\n        archiveArticles.push(arr[j].article)\n        total++\n      }\n    }\n    arr2.push({\n      date: arr[i].date,\n      articles: archiveArticles,\n      total: total\n    })\n    i += total\n  }\n\n  ctx.body = {\n    success: true,\n    data: arr2\n  }\n}\n\nexport const upload = async(ctx, next) => {\n  let form = new formidable.IncomingForm()\n\n  function getImgUrl(ctx) {\n    return new Promise((resolve, reject) => {\n      form.parse(ctx.req, function(err, fields, files) {\n        if (err) {\n          console.log(err)\n          reject(err)\n        }\n        // console.log(files)\n        let lastItem = files[Object.keys(files)[Object.keys(files).length - 1]]\n\n        // 获取文件后缀名\n        let extname = Date.now() + path.extname(lastItem.name)\n        let oldUrl = lastItem.path\n        let newUrl = './public/' + extname\n\n        // 文件重命名，上传到服务器\n        let readStream = fs.createReadStream(oldUrl)\n        let writeStream = fs.createWriteStream(newUrl)\n        readStream.pipe(writeStream)\n        let imgUrl = domain + '/public/' + extname\n        resolve(imgUrl)\n      })\n    })\n  }\n\n  await getImgUrl(ctx).then((url) => {\n    ctx.body = url\n  })\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/article.js","import mongoose from 'mongoose'\nimport axios from 'axios'\nconst Article = mongoose.model('Article')\nconst Comment = mongoose.model('Comment')\nconst User = mongoose.model('User')\n\nexport const postComment = async(ctx, next) => {\n  let body = ctx.request.body\n  let { id, token, content, replyId  = ''} = body\n  // replyId表示是一条回复，是可选的\n  if (!id || !token || !content) {\n    return (ctx.body = {\n      success: false,\n      err: 'Field incomplete'\n    })\n  }\n  // 根据token获取用户名\n  const { data } = await axios.get('https://api.github.com/user?access_token=' + token)\n  if (data.login) {\n    let user = await User.findOne({ username: data.login })\n    try {\n      let comment = await new Comment({\n        content: content,\n        user: user._id,\n        article: id,\n        replyId: replyId\n      })\n      // 保存用户评论\n      await comment.save()\n      // 更新文章评论\n      await Article.findByIdAndUpdate(id, { $push: { comments: comment } }, { safe: true, upsert: true })\n      ctx.body = {\n        success: true,\n        data: comment\n      }\n    } catch (e) {\n      ctx.body = {\n        success: false,\n        err: e\n      }\n    }\n  } else {\n    ctx.body = {\n      success: false,\n      err: 'Token is invalid'\n    }\n  }\n}\n\nexport const getComments = async(ctx, next) => {\n  let comments = await Comment.find({})\n    .populate({\n      path: 'user'\n    })\n    .populate({\n      path: 'article',\n      select: 'id title'\n    })\n    .sort({ 'createdAt': -1 })\n    .exec()\n  try {\n    ctx.body = {\n      success: true,\n      data: comments\n    }\n  } catch (e) {\n    ctx.body = {\n      success: false,\n      err: e\n    }\n  }\n}\n\nexport const deleteComment = async(ctx, next) => {\n  let { id } = ctx.params\n\n  if (!id) {\n    return (ctx.body = {\n      success: false,\n      err: 'id is required'\n    })\n  }\n\n  try {\n    let body = await Comment.findByIdAndRemove(id).exec()\n    ctx.body = {\n      success: true,\n      data: body\n    }\n  } catch (e) {\n    ctx.body = {\n      success: false,\n      err: e\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/comment.js","import mongoose from 'mongoose'\nconst Tag = mongoose.model('Tag')\nconst Article = mongoose.model('Article')\nexport const getTagsOrArticles = async(ctx, next) => {\n  let { id } = ctx.params, data\n  if (id) {\n    try {\n      data = await Article.find({ publish: true, tags: [id] })\n        .populate({\n          path: 'tags',\n          select: 'id name'\n        })\n        .sort({ 'updatedAt': -1 })\n        .exec()\n      ctx.body = {\n        success: true,\n        data: data\n      }\n    } catch (e) {\n      ctx.body = {\n        success: false,\n        err: e\n      }\n    }\n  } else {\n    data = await Tag.find({}).sort({ 'updatedAt': -1 }).exec()\n    ctx.body = {\n      success: true,\n      data: data\n    }\n  }\n}\n\nexport const postTag = async(ctx, next) => {\n  let body = ctx.request.body\n  let { name } = body\n\n  if (!name) {\n    return (ctx.body = {\n      success: false,\n      err: 'Tag name is required'\n    })\n  }\n\n  try {\n    body = new Tag(body)\n    await body.save()\n    ctx.body = {\n      success: true,\n      data: body\n    }\n  } catch (e) {\n    ctx.body = {\n      success: false,\n      err: e\n    }\n  }\n}\n\nexport const patchTag = async(ctx, next) => {\n  let body = ctx.request.body\n  body.updatedAt = Date.now()\n  const { id } = body\n  if (!id) {\n    return (ctx.body = {\n      success: false,\n      err: 'id is required'\n    })\n  }\n\n  try {\n    body = await Tag.findByIdAndUpdate(id, body).exec()\n    ctx.body = {\n      success: true,\n      data: body\n    }\n  } catch (e) {\n    ctx.body = {\n      success: false,\n      err: e\n    }\n  }\n}\n\nexport const deleteTag = async(ctx, next) => {\n  let { id } = ctx.params\n\n  if (!id) {\n    return (ctx.body = {\n      success: false,\n      err: 'id is required'\n    })\n  }\n\n  try {\n    let body = await Tag.findByIdAndRemove(id).exec()\n    ctx.body = {\n      success: true,\n      data: body\n    }\n  } catch (e) {\n    ctx.body = {\n      success: false,\n      err: e\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/tag.js","import MarkdownIt from 'markdown-it'\nimport mongoose from 'mongoose'\nimport config from '../config'\nimport fs from 'fs'\nimport path from 'path'\nconst nodemailer = require('nodemailer');\nconst Article = mongoose.model('Article')\nconst domain = config.app.domain ? config.app.domain : `http://${config.app.host}:${config.app.port}`\n// sitemap\nexport const sitemap = async(ctx, next) => {\n  let sitemap = ''\n  let head = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\">\\r\\n`\n  let tail = '</urlset>'\n  let res = await Article.find({ publish: true }).sort({ 'createdAt': -1 }).exec()\n  let body = res.reduce((prev, curr) => {\n    prev += `\n      <url>\n        <loc>${domain}/detail/${curr.id}</loc>\n        <lastmod>${curr.updatedAt}</lastmod>\n        <priority>0.6</priority>\n      </url>`.trim()\n    return prev\n  }, '')\n  sitemap = head + body + tail\n  ctx.type = 'application/xml'\n  ctx.res.end(sitemap)\n}\n\n\n// rss\nexport const rss = async(ctx, next) => {\n  let rss = ''\n  let head = `<rss xmlns:atom=\"http://www.w3.org/2005/Atom\" version=\"2.0\">\n    <channel>\n      <title>${config.user.nickname}</title>\n      <link>${domain}</link>\n      <description>${config.user.motto}</description>\n      <atom:link href=\"${domain}/rss.xml\" rel=\"self\"/>\n      <language>zh-CN</language>\n      <lastBuildDate>${new Date().toUTCString()}</lastBuildDate>\\r\\n`\n  let tail = `</channel>\\r\\n</rss>`\n  let res = await Article.find({ publish: true }).limit(10).sort({ 'createdAt': -1 }).exec()\n  let body = res.reduce((prev, curr) => {\n    let date = new Date(curr.updatedAt).toUTCString()\n    let md = new MarkdownIt()\n    let content = md.render(curr.content)\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;')\n      .replace(/\"/g, '&quot;')\n      .replace(/'/g, '&apos;')\n    prev += `\n      <item>\n        <title>${curr.title}</title>\n        <link>${domain}/detail/${curr.id}</link>\n        <description>${content}</description>\n        <pubDate>${date}</pubDate>\n        <guid>${domain}/detail/${curr.id}</guid>\n      </item>`.trim()\n    return prev\n  }, '')\n  ctx.type = 'application/xml'\n  rss = head + body + tail\n  ctx.res.end(rss)\n}\n\n\n\n// robots\nexport const robots = (ctx, next) => {\n  let robots = `\n    User-agent: *\n    Allow: /\n    Sitemap: ${domain}/sitemap.xml\n    User-agent: YisouSpider\n    Disallow: /\n    User-agent: EasouSpider\n    Disallow: /\n    User-agent: EtaoSpider\n    Disallow: /\n    User-agent:`.trim()\n  ctx.res.end(robots)\n}\n\nexport const sendEmail = async (ctx, next) => {\n  let body = ctx.request.body\n  let {\n    fromUserNickname,\n    fromUserContent,\n    fromUserEmail,\n    toUserNickname,\n    toUserContent,\n    toUserEmail,\n    articleId\n  } = body\n  if (!fromUserNickname || !fromUserContent || !fromUserEmail || !toUserNickname || !toUserContent || !toUserEmail || !articleId) {\n    return (ctx.body = {\n      success: false,\n      err: 'Field incomplete'\n    })\n  }\n  let transporter = nodemailer.createTransport({\n    service: 'qq',\n    port: 465,\n    secure: true,\n    auth: {\n      user: config.emailConfig.user,\n      pass: config.emailConfig.pass\n    }\n  })\n  let domain = config.app.domain ? config.app.domain : config.app.host\n  let mailOptions = {\n    from: config.emailConfig.user,\n    to: toUserEmail,\n    subject: '博客评论通知',\n    html: `<p>${fromUserNickname}回复了你的评论：<p>\n    <p>原内容：${toUserContent}<p>\n    <p>回复内容：${fromUserContent}<p>\n    <p><a href=\"${domain}/detail/${articleId}\">查看原文</a></p>`.trim()\n  }\n  await transporter.sendMail(mailOptions).then(function(info){\n    ctx.body = {\n      success: true,\n      data: info\n    }\n  }).catch(function(err){\n     ctx.body = {\n      success: false,\n      err: err\n    }\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/tool.js","import mongoose from 'mongoose'\nimport jwt from 'jsonwebtoken'\nimport md5 from 'md5'\nimport axios from 'axios'\nimport url from 'url'\nimport config from '../config'\n\nconst User = mongoose.model('User')\n\nconst domain = config.app.domain ? config.app.domain : `http://${config.app.host}:${config.app.port}`\n\nexport const login = async(ctx, next) => {\n  let { username, password } = ctx.request.body\n  password = md5(password)\n  try {\n    let user = await User.findOne({username: username, password: password}).exec()\n    let secret = config.jwt.secret\n    let expiresIn = config.jwt.expiresIn\n    let token = jwt.sign({ username: user.username, userID: user._id }, secret)\n    ctx.cookies.set('token', token)\n    ctx.body = {\n      success: true,\n      data: {\n        token: token\n      }\n    }\n  } catch (e) {\n    ctx.body = {\n      success: false,\n      err: e\n    }\n  }\n}\n\nexport const logout = (ctx, next) => {\n  ctx.cookies.set('token', null)\n  ctx.body = {\n    success: true,\n    data: {}\n  }\n}\n\nexport const getUserInfo = async(ctx, next) => {\n  let { username } = ctx.params\n  let avatarUrl = domain + '/public/' + config.user.avatar\n  if(!username){\n    // 获取管理员信息\n    try {\n      let data = await User.findOne({ role: 'superAdmin' }).exec()\n      data.avatar = avatarUrl\n      ctx.body = {\n        success: true,\n        data: data\n      }\n    } catch (e) {\n      ctx.body = {\n        success: false,\n        err: e\n      }\n    }\n  } else {\n    // 获取普通用户信息\n    try {\n      let data = await User.findOne({ username: username }).exec()\n      ctx.body = {\n        success: true,\n        data: data\n      }\n    } catch (e) {\n      ctx.body = {\n        success: false,\n        err: e\n      }\n    }\n  }\n}\n\nexport const patchUserInfo = async(ctx, next) => {\n  let body = ctx.request.body\n\n  if (body.oldPassword && body.newPassword) {\n    // 更新管理员密码\n    let oldPassword = md5(body.oldPassword)\n    let newPassword = md5(body.newPassword)\n    try {\n      let user = await User.findOne({ role: 'superAdmin' }).exec()\n      if (user.password !== oldPassword) {\n        return (ctx.body = {\n          success: false,\n          err: 'Wrong password'\n        })\n      }\n      body = await User.findOneAndUpdate({ role: 'superAdmin' }, { password: newPassword, updatedAt: Date.now() }).exec()\n      ctx.body = {\n        success: true,\n        data: body\n      }\n    } catch (e) {\n      ctx.body = {\n        success: false,\n        err: e\n      }\n    }\n  } else {\n    // 更新管理员信息\n    body.updatedAt = Date.now()\n    try {\n      body = await User.findOneAndUpdate({ role: 'superAdmin' }, body).exec()\n      ctx.body = {\n        success: true,\n        data: body\n      }\n    } catch (e) {\n      ctx.body = {\n        success: false,\n        err: e\n      }\n    }\n  }\n}\n\n// state表示github授权后的回调信息\nlet state = ''\nexport const githubLogin = (ctx, next) => {\n  state = ctx.params.state || ''\n  let u = `https://github.com/login/oauth/authorize?client_id=${config.githubConfig.githubClient}&scope=${config.githubConfig.scope}&redirect_uri=${domain}/api/oauth/github/callback&state=${state}`\n    ctx.res.statusCode = 302\n    ctx.res.setHeader('location', u)\n    ctx.res.end()\n}\n\n// 授权成功后的回调函数\nexport const githubCallback = async (ctx, next) => {\n  let query = url.parse(ctx.req.url, true).query\n  let code = query.code\n  let u = `https://github.com/login/oauth/access_token?client_id=${config.githubConfig.githubClient}&client_secret=${config.githubConfig.githubSecret}&code=${code}&state=${state}`\n  let githubToken = ''\n\n  // 把获取到的token设置到cookie里\n  await axios.get(u).then((ret) => {\n    const {data} = ret\n    var arr = data.split('&'),obj = {}\n    arr.forEach(function(item){\n      var key = item.split('=')[0]\n      var value = item.split('=')[1]\n      obj[key] = value\n    })\n    if(obj.access_token) {\n      githubToken = obj.access_token\n      ctx.cookies.set('githubToken', obj.access_token)\n    }else {\n      ctx.cookies.set('githubToken', '')\n    }\n  })\n  if(githubToken) {\n    let userInfo = {}\n    // 把用户信息保存到数据库\n    await axios.get(`https://api.github.com/user?access_token=${githubToken}`).then(ret => {\n      const {data} = ret\n      userInfo.role = 'user'\n      userInfo.username = data.login\n      userInfo.email = data.email\n      userInfo.nickname = data.name\n      userInfo.motto = data.bio\n      userInfo.avatar = data.avatar_url\n    })\n\n    var user = await User.findOne({ username: userInfo.username }).exec()\n    if(!user) {\n      user = new User(userInfo)\n      await user.save()\n    }\n  }\n  // 完成授权后页面重定向\n  return ctx.response.redirect(`${domain}/detail/${state}`)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/user.js","import mongoose from 'mongoose'\nimport jwt from 'jsonwebtoken'\nimport config from '../config'\nimport axios from 'axios'\nconst User = mongoose.model('User')\n\nfunction parseCookies(cookies) {\n  let cookie = cookies.split(';'), cookieObj = {}, cookieArr = [], key = '', value = '';\n  for (let i = 0; i < cookie.length; i++) {\n    cookieArr = cookie[i].trim().split('=')\n    key = cookieArr[0]\n    value = cookieArr[1]\n    cookieObj[key] = value\n  }\n  return cookieObj\n}\nexport const checkToken = async(ctx, next) => {\n  // 可以从cookie里面获得token，也可以从request header里获取token\n  let cookieObj = parseCookies(ctx.get('Cookie')), token = ''\n  if(cookieObj && cookieObj.token) {\n    token = cookieObj.token\n  }else if(ctx.get('token')) {\n    token = ctx.get('token')\n  }else{\n    token = ''\n  }\n\n  if (token) {\n    try {\n      const decoded = jwt.verify(token, config.jwt.secret)\n      const username = decoded.username\n      const userID = decoded.userID\n      let user = await User.findOne({ _id: userID, username: username }).exec()\n      if (user._id && user.username) {\n        await next()\n      } else {\n        return (ctx.body = {\n          success: false,\n          err: 'Token is invalid'\n        })\n      }\n    } catch (e) {\n      return (ctx.body = {\n        success: false,\n        err: e\n      })\n    }\n  } else {\n    return (ctx.body = {\n      success: false,\n      err: 'Please login'\n    })\n  }\n}\n\nexport const checkGithubToken = async(ctx, next) => {\n  let githubToken = ctx.get('githubToken')\n  if (githubToken) {\n    try {\n      const { data } = await axios.get('https://api.github.com/user?access_token=' + githubToken)\n      // 用户存在\n      let user = await User.findOne({ username: data.login })\n      if (user._id && user.username) {\n        await next()\n      } else {\n        return (ctx.body = {\n          success: false,\n          err: 'Token is invalid'\n        })\n      }\n    } catch (e) {\n      return (ctx.body = {\n        success: false,\n        err: e\n      })\n    }\n  } else {\n    return (ctx.body = {\n      success: false,\n      err: 'Please login'\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/middlewares/check-token.js","import mongoose from 'mongoose'\nconst Schema = mongoose.Schema\n\nconst ArticleSchema = new Schema({\n  title: String,\n  content: String,\n  publish: {\n    type: Boolean,\n    default: false\n  },\n  views: {\n    type: Number,\n    default: 0\n  },\n  flag: {\n    type: Number,\n    default: 1\n  },\n  like: {\n    type: Array,\n    default: []\n  },\n  comments: [{\n    type: Schema.Types.ObjectId,\n    ref: 'Comment'\n  }],\n  tags: [{\n    type: Schema.Types.ObjectId,\n    ref: 'Tag'\n  }],\n  createdAt: {\n    type: Date,\n    default: Date.now\n  },\n  updatedAt: {\n    type: Date,\n    default: Date.now\n  }\n})\n\nArticleSchema.options.toJSON = {\n  virtuals: true,\n  versionKey: false,\n  transform(doc, ret) {\n    ret.id = ret._id\n    delete ret._id\n  }\n}\n// db.users.update({}, {$set: {github: 'https://github.com/wmui'}}, {multi: 1})\nmongoose.model('Article', ArticleSchema)\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/article.js","import mongoose from 'mongoose'\nconst Schema = mongoose.Schema\n\nconst CommentSchema = new Schema({\n  user: {\n    type: Schema.Types.ObjectId,\n    ref: 'User',\n  },\n  article:{\n    type: Schema.Types.ObjectId,\n    ref: 'Article',\n  },\n  content: {\n    type: String,\n    default: ''\n  },\n  createdAt: {\n    type: Date,\n    default: Date.now\n  },\n  replyId: {\n    type: String,\n    default: ''\n  }\n})\n\nCommentSchema.options.toJSON = {\n  virtuals: true,\n  versionKey: false,\n  transform(doc, ret) {\n    ret.id = ret._id\n    delete ret._id\n  }\n}\n\nmongoose.model('Comment', CommentSchema)\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/comment.js","import mongoose from 'mongoose'\nimport md5 from 'md5'\nimport config from '../config'\n\nrequire('./user')\nrequire('./tag')\nrequire('./article')\nrequire('./comment')\n\nconst User = mongoose.model('User')\n\nconst mongoUrl = `mongodb://${config.mongodb.host}:${config.mongodb.port}/${config.mongodb.database}`\nmongoose.Promise = global.Promise\nmongoose.connection\n  .openUri(mongoUrl)\n  .once('open', async () => {\n    console.log('database connect successed')\n    // 初始化管理员信息\n    let userInfo = config.user\n    userInfo.password = md5(userInfo.password)\n\n    let user = await User.findOne({ role: 'superAdmin' }).exec()\n    if (!user) {\n      user = new User(userInfo)\n      await user.save()\n      console.log('Administrator information initialization succeeded')\n    }\n  })\n  .on('error', (error) => {\n    console.warn('database connect fail', error)\n  })\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/index.js","import mongoose from 'mongoose'\nconst Schema = mongoose.Schema\n\nconst TagSchema = new Schema({\n  name: {\n    type: String,\n    default: ''\n  },\n  createdAt: {\n    type: Date,\n    default: Date.now\n  },\n  updatedAt: {\n    type: Date,\n    default: Date.now\n  }\n})\n\nTagSchema.options.toJSON = {\n  virtuals: true,\n  versionKey: false,\n  transform(doc, ret) {\n    ret.id = ret._id\n    delete ret._id\n  }\n}\n\nmongoose.model('Tag', TagSchema)\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/tag.js","import mongoose from 'mongoose'\nconst Schema = mongoose.Schema\n\nconst UserSchema = new Schema({\n  role: {\n    type: String,\n    default: 'user'\n  },\n  username: String,\n  password: String,\n  email: String,\n  nickname: String,\n  motto: String,\n  avatar: String,\n  createdAt: {\n    type: Date,\n    default: Date.now\n  },\n  updatedAt: {\n    type: Date,\n    default: Date.now\n  }\n})\n\n// 隐藏一些字段\nUserSchema.options.toJSON = {\n  virtuals: true,\n  versionKey: false,\n  transform(doc, ret) {\n    ret.id = ret._id\n    delete ret._id\n    delete ret.id\n  }\n}\nmongoose.model('User', UserSchema)\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/user.js","module.exports = require(\"formidable\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"formidable\"\n// module id = 27\n// module chunks = 0","module.exports = require(\"markdown-it\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"markdown-it\"\n// module id = 28\n// module chunks = 0","module.exports = require(\"nodemailer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nodemailer\"\n// module id = 29\n// module chunks = 0","module.exports = require(\"os\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"os\"\n// module id = 30\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 31\n// module chunks = 0","module.exports = require(\"url\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"url\"\n// module id = 32\n// module chunks = 0","import Koa from 'koa'\nimport { Nuxt, Builder } from 'nuxt'\nimport KoaStatic from 'koa-static'\nimport bodyParser from 'koa-bodyparser'\nimport Router from 'koa-router'\nimport cors from '@koa/cors'\nimport globalConfig from './config'\nimport route from './routes'\n\nasync function start() {\n  const app = new Koa()\n\n  const host = process.env.HOST || globalConfig.app.host\n  const port = process.env.PORT || globalConfig.app.port\n  const router = new Router()\n  app.use(cors())\n  app.use(bodyParser())\n  app.use(KoaStatic('.'))\n  router.use('', route.routes())\n  app\n  .use(router.routes())\n  .use(router.allowedMethods())\n\n\n  // Import and Set Nuxt.js options\n  let config = require('../nuxt.config.js')\n  config.dev = !(app.env === 'production')\n\n  // Instantiate nuxt.js\n  const nuxt = new Nuxt(config)\n\n  // Build in development\n  if (config.dev) {\n    const builder = new Builder(nuxt)\n    await builder.build()\n  }\n\n  app.use(async (ctx, next) => {\n    await next()\n    ctx.status = 200 // koa defaults to 404 when it sees that status is unset\n    return new Promise((resolve, reject) => {\n      ctx.res.on('close', resolve)\n      ctx.res.on('finish', resolve)\n      nuxt.render(ctx.req, ctx.res, promise => {\n        // nuxt.render passes a rejected promise into callback on error.\n        promise.then(resolve).catch(reject)\n      })\n    })\n  })\n\n  app.listen(port, host)\n  console.log('Server listening on ' + host + ':' + port) // eslint-disable-line no-console\n}\n\nstart()\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js"],"sourceRoot":""}